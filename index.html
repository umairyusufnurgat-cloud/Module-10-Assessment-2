<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Culinary Canvas - Recipe Book</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="header-content">
                <h1 class="logo">🍳 Culinary Canvas</h1>
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Search recipes, ingredients..." />
                    <button class="search-btn">🔍</button>
                </div>
                <button class="add-recipe-btn" onclick="showAddRecipe()">📷 Scan Recipe</button>
            </div>
        </header>

        <nav class="category-nav">
            <button class="category-btn active" onclick="filterRecipes('all')">All</button>
            <button class="category-btn" onclick="filterRecipes('breakfast')">🥞 Breakfast</button>
            <button class="category-btn" onclick="filterRecipes('lunch')">🥗 Lunch</button>
            <button class="category-btn" onclick="filterRecipes('dinner')">🍽️ Dinner</button>
            <button class="category-btn" onclick="filterRecipes('dessert')">🍰 Dessert</button>
            <button class="category-btn" onclick="filterRecipes('snack')">🍿 Snacks</button>
        </nav>

        <main class="main-content">
            <div class="recipes-grid" id="recipesGrid">
                <!-- Recipes will be populated by JavaScript -->
            </div>
        </main>

        <!-- Recipe Detail Modal -->
        <div class="modal" id="recipeModal" style="display: none;">
            <div class="modal-content recipe-detail">
                <button class="close-btn" onclick="closeRecipeModal()">&times;</button>
                <div class="recipe-hero">
                    <img id="modalImage" src="" alt="Recipe">
                    <div class="recipe-overlay">
                        <h2 id="modalTitle"></h2>
                        <div class="recipe-meta">
                            <span id="modalTime"></span>
                            <span id="modalDifficulty"></span>
                            <span id="modalServings"></span>
                        </div>
                    </div>
                </div>
                <div class="recipe-content">
                    <div class="recipe-text-section">
                        <h3>📝 Recipe Text</h3>
                        <div id="modalRecipeText" class="recipe-text-display"></div>
                    </div>
                    <div class="recipe-actions">
                        <button class="edit-recipe-btn" onclick="editRecipe()">✏️ Edit Recipe</button>
                        <button class="delete-recipe-btn" onclick="deleteRecipe()">🗑️ Delete Recipe</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Recipe Modal -->
        <div class="modal" id="addRecipeModal" style="display: none;">
            <div class="modal-content add-recipe-form">
                <button class="close-btn" onclick="hideAddRecipe()">&times;</button>
                <h2>Add Recipe</h2>
                <form id="recipeForm">
                    <div class="form-group">
                        <label>Scan Recipe Image</label>
                        <div class="scan-container">
                            <input type="file" id="scanFile" accept="image/*" capture="environment" onchange="handleScanUpload(event)">
                            <div class="scan-buttons">
                                <button type="button" class="scan-btn camera-btn" onclick="document.getElementById('scanFile').click()">
                                    📱 Take Photo
                                </button>
                                <button type="button" class="scan-btn upload-btn" onclick="openFileUpload()">
                                    📁 Upload Image
                                </button>
                            </div>
                            <input type="file" id="uploadFile" accept="image/*" onchange="handleScanUpload(event)" style="display: none;">
                            <div id="scanProgress" style="display: none; margin-top: 0.5rem;">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progressFill"></div>
                                </div>
                                <p id="scanStatus">Processing...</p>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Recipe Name</label>
                        <input type="text" id="recipeName" placeholder="Enter recipe name" required>
                    </div>
                    <div class="form-group">
                        <label>Recipe Text (Scanned or Manual)</label>
                        <textarea id="recipeText" rows="15" placeholder="Recipe will appear here after scanning, or type manually..." required></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Save Recipe</button>
                </form>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/tesseract.js@v4.1.1/dist/tesseract.min.js"></script>
    <script src="script.js"></script>
</body>
</html>